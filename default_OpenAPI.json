{
  "openapi": "3.0.1",
  "info": {
    "title": "听悦API文档",
    "description": "听悦 - 音频转笔记工具API文档",
    "termsOfService": "http://doc.xiaominfo.com",
    "contact": {
      "name": "Gray",
      "url": "https://github.com/yourusername",
      "email": "your-email@example.com"
    },
    "license": {
      "name": "Apache 2.0",
      "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
    },
    "version": "1.0"
  },
  "servers": [
    {
      "url": "http://localhost:8899",
      "description": "Generated server url"
    }
  ],
  "tags": [
    {
      "name": "用户管理",
      "description": "用户相关接口"
    },
    {
      "name": "翻译管理",
      "description": "文本翻译相关接口"
    },
    {
      "name": "音频处理",
      "description": "音频转写、实时语音识别等接口"
    }
  ],
  "paths": {
    "/api/user/register": {
      "post": {
        "tags": [
          "用户管理"
        ],
        "summary": "用户注册",
        "description": "注册新用户",
        "operationId": "register",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          }
        }
      }
    },
    "/api/user/login": {
      "post": {
        "tags": [
          "用户管理"
        ],
        "summary": "用户登录",
        "description": "用户登录并返回JWT令牌",
        "operationId": "login",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/translation/translate": {
      "post": {
        "tags": [
          "翻译管理"
        ],
        "summary": "文本翻译",
        "description": "将文本从源语言翻译为目标语言",
        "operationId": "translate",
        "parameters": [
          {
            "name": "text",
            "in": "query",
            "description": "待翻译文本",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "sourceLanguage",
            "in": "query",
            "description": "源语言代码，如：zh、en",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "targetLanguage",
            "in": "query",
            "description": "目标语言代码，如：en、zh",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/api/audio/upload-and-transcribe": {
      "post": {
        "tags": [
          "音频处理"
        ],
        "summary": "上传本地音频文件并转写",
        "operationId": "uploadAndTranscribeAudio",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "required": [
                  "file"
                ],
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/TranscriptionResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/audio/recognize/stream": {
      "post": {
        "tags": [
          "音频处理"
        ],
        "summary": "开始实时语音识别",
        "operationId": "startStreamRecognition",
        "parameters": [
          {
            "name": "duration",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int64",
              "default": 30000
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/SseEmitter"
                }
              }
            }
          }
        }
      }
    },
    "/api/translation/languages": {
      "get": {
        "tags": [
          "翻译管理"
        ],
        "summary": "获取支持的语言列表",
        "description": "获取系统支持的所有语言列表",
        "operationId": "getSupportedLanguages",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "RegisterRequest": {
        "required": [
          "email",
          "password",
          "username"
        ],
        "type": "object",
        "properties": {
          "username": {
            "maxLength": 20,
            "minLength": 4,
            "type": "string",
            "description": "用户名",
            "example": "test123"
          },
          "password": {
            "maxLength": 20,
            "minLength": 6,
            "type": "string",
            "description": "密码",
            "example": "123456"
          },
          "email": {
            "type": "string",
            "description": "邮箱",
            "example": "test@example.com"
          }
        },
        "description": "用户注册请求"
      },
      "GrantedAuthority": {
        "type": "object",
        "properties": {
          "authority": {
            "type": "string"
          }
        }
      },
      "User": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "用户ID",
            "format": "int64",
            "example": 1
          },
          "username": {
            "type": "string",
            "description": "用户名",
            "example": "test123"
          },
          "email": {
            "type": "string",
            "description": "邮箱",
            "example": "test@example.com"
          },
          "passwordHash": {
            "type": "string",
            "description": "密码哈希值",
            "example": "$2a$10$XXXXXX"
          },
          "createdAt": {
            "type": "string",
            "description": "创建时间",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "description": "更新时间",
            "format": "date-time"
          },
          "enabled": {
            "type": "boolean"
          },
          "password": {
            "type": "string"
          },
          "authorities": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/GrantedAuthority"
            }
          },
          "accountNonLocked": {
            "type": "boolean"
          },
          "accountNonExpired": {
            "type": "boolean"
          },
          "credentialsNonExpired": {
            "type": "boolean"
          }
        },
        "description": "用户信息"
      },
      "LoginRequest": {
        "required": [
          "password",
          "username"
        ],
        "type": "object",
        "properties": {
          "username": {
            "type": "string",
            "description": "用户名",
            "example": "test123"
          },
          "password": {
            "type": "string",
            "description": "密码",
            "example": "123456"
          }
        },
        "description": "用户登录请求"
      },
      "LoginResponse": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string",
            "description": "JWT令牌",
            "example": "eyJhbGciOiJIUzI1NiJ9..."
          }
        },
        "description": "登录响应"
      },
      "TranscriptionResponse": {
        "type": "object",
        "properties": {
          "text": {
            "type": "string",
            "description": "转写文本"
          }
        },
        "description": "音频转写响应"
      },
      "SseEmitter": {
        "type": "object",
        "properties": {
          "timeout": {
            "type": "integer",
            "format": "int64"
          }
        }
      }
    },
    "securitySchemes": {
      "Authorization": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  },
  "x-openapi": {
    "x-setting": {
      "customCode": 200,
      "language": "zh-CN",
      "enableSwaggerModels": true,
      "swaggerModelName": "实体类列表",
      "enableReloadCacheParameter": false,
      "enableAfterScript": true,
      "enableDocumentManage": true,
      "enableVersion": false,
      "enableRequestCache": true,
      "enableFilterMultipartApis": false,
      "enableFilterMultipartApiMethodType": "POST",
      "enableHost": false,
      "enableHostText": "",
      "enableDynamicParameter": false,
      "enableDebug": true,
      "enableFooter": true,
      "enableFooterCustom": false,
      "enableSearch": true,
      "enableOpenApi": true,
      "enableHomeCustom": false,
      "enableGroup": true,
      "enableResponseCode": true
    },
    "x-markdownFiles": [
      {
        "group": "default",
        "name": "项目文档"
      }
    ]
  }
}